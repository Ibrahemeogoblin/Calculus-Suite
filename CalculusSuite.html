<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculus Suite Pro</title>
    <script src="js/lib-guard.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.27.0/plotly.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/algebrite/1.4.0/algebrite.bundle-for-browser.js"
            data-library="Algebrite"
            data-fallback="https://cdn.jsdelivr.net/npm/algebrite@1.4.0/dist/algebrite.bundle-for-browser.js"
            onerror="handleLibraryFallback(this)"></script>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="hero-bg"></div>
    
    <div class="container">
        <header>
            <div class="hero-pill">Precision Engineered Â· 2025 Release</div>
            <h1>âš¡ Calculus Suite Pro</h1>
            <p class="subtitle">A premium calculus studio with symbolic precision, live visualization, and effortless controls.</p>
            <div class="hero-meta">
                <span>Symbolic & numeric solvers</span>
                <span>Live 2D / 3D plots</span>
                <span>Cupertino-grade interface</span>
            </div>
            <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">â˜€ï¸</button>
        </header>

        <div class="main-grid">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="section">
                    <div class="label">
                        <span>ğŸ“</span>
                        <span>Function Input</span>
                    </div>
                    <textarea id="functionInput" placeholder="Enter function (e.g., x^2 + sin(x) * e^x)" oninput="validateFunction()"></textarea>
                    <div id="preview" class="preview-box">Enter a function to begin...</div>
                </div>

                <div class="section">
                    <div class="label">
                        <span>âš¡</span>
                        <span>Quick Templates</span>
                    </div>
                    <div class="templates-grid">
                        <button class="template-btn" onclick="insertTemplate('x^2')">xÂ²</button>
                        <button class="template-btn" onclick="insertTemplate('sin(x)')">sin</button>
                        <button class="template-btn" onclick="insertTemplate('e^x')">eË£</button>
                        <button class="template-btn" onclick="insertTemplate('log(x)')">ln</button>
                        <button class="template-btn" onclick="insertTemplate('1/x')">1/x</button>
                        <button class="template-btn" onclick="insertTemplate('sqrt(x)')">âˆšx</button>
                        <button class="template-btn" onclick="insertTemplate('x^3-2*x')">cubic</button>
                        <button class="template-btn" onclick="insertTemplate('tan(x)')">tan</button>
                        <button class="template-btn" onclick="insertTemplate('e^(-x^2)')">gauss</button>
                    </div>
                </div>

                <div class="section">
                    <div class="label">
                        <span>ğŸ¯</span>
                        <span>Operation Mode</span>
                    </div>
                    <select id="operationMode" onchange="updateModeOptions()">
                        <option value="basic">Basic Calculus</option>
                        <option value="advanced">Advanced Integration</option>
                        <option value="differential">Differential Equations</option>
                        <option value="series">Series Expansion</option>
                        <option value="multivariable">Multi-variable Calculus</option>
                    </select>

                    <div id="modeOptions" class="mode-options hidden"></div>
                </div>

                <div class="section">
                    <div class="label">
                        <span>âš™ï¸</span>
                        <span>Settings</span>
                    </div>
                    <div class="settings-section">
                        <div class="setting-row">
                            <div class="setting-label">
                                <span>Precision</span>
                                <span class="setting-value" id="precisionValue">4</span>
                            </div>
                            <input type="range" class="slider" id="precision" min="2" max="10" value="4" oninput="updatePrecision(this.value)">
                        </div>
                        <div class="setting-row">
                            <div class="setting-label">
                                <span>Plot Resolution</span>
                                <span class="setting-value" id="resolutionValue">200</span>
                            </div>
                            <input type="range" class="slider" id="resolution" min="50" max="500" value="200" step="50" oninput="updateResolution(this.value)">
                        </div>
                    </div>
                </div>

                <div class="btn-grid">
                    <button class="btn btn-primary" onclick="compute()" id="computeBtn">
                        <span>ğŸš€</span>
                        <span>Compute</span>
                    </button>
                    <button class="btn btn-secondary" onclick="clearAll()">
                        <span>ğŸ—‘ï¸</span>
                        <span>Clear</span>
                    </button>
                </div>
            </aside>

            <!-- Workspace -->
            <main class="workspace">
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('results')">ğŸ“Š Results</button>
                    <button class="tab" onclick="switchTab('plot')">ğŸ“ˆ 2D Plot</button>
                    <button class="tab" onclick="switchTab('plot3d')">ğŸ® 3D Plot</button>
                    <button class="tab" onclick="switchTab('steps')">ğŸ“š Steps</button>
                </div>

                <div id="results" class="tab-content active">
                    <div class="empty-state">
                        <div class="empty-state-icon">ğŸ§®</div>
                        <h3>Ready to Compute</h3>
                        <p>Enter a function and select an operation to begin</p>
                    </div>
                </div>

                <div id="plot" class="tab-content">
                    <div class="plot-container">
                        <div id="plot2d"></div>
                    </div>
                </div>

                <div id="plot3d" class="tab-content">
                    <div class="plot-container">
                        <div id="plot3dDiv"></div>
                    </div>
                </div>

                <div id="steps" class="tab-content">
                    <div class="empty-state">
                        <div class="empty-state-icon">ğŸ“–</div>
                        <h3>Step-by-Step Solutions</h3>
                        <p>Computation steps will appear here</p>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <footer class="cupertino-footer">
        <div class="footer-inner">
            <div class="footer-copy">
                Crafted for mathematicians who care about every pixel and decimal.
            </div>
            <div class="footer-contact">
                <a href="mailto:crankyhydra@gmail.com">crankyhydra@gmail.com</a>
                <span class="footer-bullet">â€¢</span>
                <a href="https://github.com/Ibrahemeogoblin" target="_blank" rel="noopener">github.com/Ibrahemeogoblin</a>
            </div>
        </div>
    </footer>

    <script src="js/app.js"></script>
</body>
</html>